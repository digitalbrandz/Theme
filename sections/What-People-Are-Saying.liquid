{% style %}
{% assign loadedfonts = '' %}    
{% assign familyandweight = section.settings.title_font.family | append: section.settings.title_font.weight %}
{% if loadedfonts contains familyandweight %}
{% else %}
  {{ section.settings.title_font | font_face }}  
{% endif %}   
{% assign loadedfonts = loadedfonts | append: section.settings.title_font.family | append: section.settings.title_font.weight | append: section.settings.title_font.style | append: '|' %}


#shopify-section-{{ section.id }} .featured-review h2 {
    font-family: {{ section.settings.title_font.family }}; 
    font-weight:{{ section.settings.title_font.weight }}; 
    font-style:{{ section.settings.title_font.style }};    
    font-size:{{ section.settings.title_font_size }}px;   
line-height: 1;
color:{{ section.settings.title_font_color }};
}

#shopify-section-{{ section.id }} .featured-review .row .review .quote .inner svg path {
fill:{{ section.settings.quote_symbol_color }};
}

#shopify-section-{{ section.id }} .featured-review .row .review .quote {
background: {{ section.settings.quote_bubble_color }};
}

#shopify-section-{{ section.id }} .featured-review .row .review .quote .inner {
color:{{ section.settings.quote_font_color }};
}


#shopify-section-{{ section.id }} .featured-review .row .user .info>div:nth-child(1) {
color:{{ section.settings.author_name_color }};
}
#shopify-section-{{ section.id }} .featured-review .row .user .info>div:nth-child(2) {
color:{{ section.settings.author_title_color }};
}

#shopify-section-{{ section.id }} .featured-review .row .symbol svg path {
fill: {{ section.settings.quote_bubble_color }};
}

{% if section.settings.css != nil %}
{{ section.settings.css | replace: '&gt;', '>' }}
{% endif %}
{% endstyle %}


<div class="featured-review">
  <h2 class="text-center"><span>{{ section.settings.title }}</span></h2>
<div class="row align-center">
  
    <div class="swiper-container reviewslider">       
     <div class="swiper-wrapper">
  
      {% for block in section.blocks %}
          {% case block.type %}
             {% when 'Review' %}  
  <div class="swiper-slide">
	<div class="review">
      
      <div class="quote" data-swiper-parallax-y="-100%" data-swiper-parallax-x="10%" data-swiper-parallax-scale="0" data-swiper-parallax-duration="500">
 	    <div class="inner">
          <div data-swiper-parallax-scale="0" data-swiper-parallax-y="-100%" data-swiper-parallax-duration="600">
    <svg width="498pt" height="387pt" viewBox="0 0 498 387" version="1.1" xmlns="http://www.w3.org/2000/svg">
<g id="#686868ff">
<path fill="#686868" opacity="1.00" d=" M 76.95 72.92 C 112.00 41.37 154.83 19.82 198.90 3.86 C 198.90 13.16 198.91 22.45 198.89 31.74 C 167.01 42.83 137.62 61.97 115.74 87.78 C 96.03 111.28 80.95 139.33 75.72 169.77 C 74.79 175.82 73.65 181.87 73.85 188.02 C 73.85 195.24 72.77 203.02 76.35 209.65 C 77.73 211.88 79.91 214.62 82.87 214.06 C 87.94 212.65 91.72 208.73 96.33 206.37 C 107.47 200.08 120.34 197.51 133.01 197.08 C 148.15 196.44 163.46 200.59 176.15 208.90 C 190.01 218.13 201.59 230.89 209.14 245.76 C 215.24 258.21 218.40 272.13 217.98 286.00 C 218.54 308.05 209.81 329.90 195.27 346.33 C 180.12 364.76 158.03 377.63 134.23 380.49 C 118.91 381.97 103.16 381.39 88.46 376.48 C 67.66 369.72 49.50 356.05 35.80 339.16 C 19.05 319.08 9.56 293.71 6.12 267.96 C 2.63 243.49 3.58 218.47 8.14 194.19 C 17.00 147.67 42.03 104.72 76.95 72.92 Z" />
<path fill="#686868" opacity="1.00" d=" M 350.35 71.32 C 385.21 40.72 427.28 19.36 470.76 3.88 C 470.77 13.12 470.77 22.36 470.75 31.60 C 448.47 39.47 427.42 51.08 409.22 66.21 C 393.94 78.70 381.17 94.06 370.68 110.74 C 357.55 131.64 348.44 155.32 345.97 179.97 C 346.02 185.67 344.30 191.28 345.00 196.99 C 345.71 201.79 346.07 206.92 348.90 211.05 C 350.10 212.96 352.46 214.67 354.82 213.96 C 359.63 212.52 363.30 208.89 367.65 206.56 C 381.91 198.53 398.78 196.22 414.91 197.31 C 433.10 199.10 450.25 208.00 462.74 221.25 C 477.48 235.32 487.30 254.66 489.18 275.01 C 490.93 286.02 489.55 297.28 487.18 308.09 C 482.72 326.59 471.79 343.04 457.83 355.78 C 442.86 370.23 422.79 379.23 402.06 380.88 C 388.59 381.65 374.86 381.19 361.92 377.02 C 337.83 369.90 317.64 353.12 302.82 333.21 C 285.09 308.93 277.23 278.70 276.07 249.00 C 276.44 237.33 275.28 225.59 277.02 214.01 C 280.90 170.46 299.27 128.68 327.28 95.25 C 334.25 86.62 342.45 79.09 350.35 71.32 Z" />
</g>
</svg>
 </div>
          <div>
 	    {{ block.settings.review }}
          </div>
	   </div>
      </div>
      
      <div class="symbol" data-swiper-parallax-scale="0" data-swiper-parallax-y="-200%" data-swiper-parallax-duration="600">
<svg width="827pt" height="1391pt" viewBox="0 0 827 1391" version="1.1" xmlns="http://www.w3.org/2000/svg">
<g id="#585470ff">
<path fill="#585470" opacity="1.00" d=" M 400.65 0.00 L 426.35 0.00 C 451.89 1.30 477.41 3.99 502.39 9.61 C 566.79 23.64 627.60 53.56 678.17 95.81 C 727.29 136.70 766.76 189.09 792.37 247.65 C 808.32 284.06 819.00 322.80 823.80 362.27 C 825.58 375.00 826.17 387.84 827.00 400.64 L 827.00 426.35 C 825.38 463.88 819.56 501.31 808.15 537.15 C 787.22 604.41 748.53 665.97 697.26 714.25 C 690.41 720.51 684.97 728.05 679.46 735.46 C 669.34 748.90 660.00 762.92 650.89 777.06 C 642.14 790.20 634.42 803.99 626.88 817.85 C 613.54 842.60 601.91 868.29 592.79 894.89 C 582.89 924.00 575.88 954.27 574.45 985.05 C 572.89 1012.87 576.16 1041.00 584.74 1067.54 C 587.31 1075.16 588.80 1083.20 592.62 1090.35 C 609.00 1120.43 617.40 1154.77 616.99 1189.01 C 616.75 1222.91 607.79 1256.69 591.24 1286.28 C 574.31 1316.68 549.44 1342.58 519.81 1360.81 C 490.31 1379.18 456.00 1389.26 421.36 1391.00 L 402.66 1391.00 C 385.34 1389.48 368.01 1386.96 351.44 1381.54 C 319.93 1371.59 290.93 1353.81 267.79 1330.22 C 243.07 1305.33 225.03 1273.90 215.97 1240.02 C 203.03 1192.26 208.18 1139.77 230.62 1095.63 C 233.10 1090.89 235.74 1086.19 237.19 1081.01 C 240.68 1068.24 245.29 1055.76 247.68 1042.69 C 255.63 1002.14 251.82 959.94 240.93 920.30 C 231.97 886.42 218.06 854.07 201.90 823.04 C 185.86 792.68 167.33 763.66 146.96 736.03 C 140.16 726.93 133.46 717.66 125.14 709.86 C 77.48 663.53 41.15 605.60 20.52 542.41 C 8.06 504.98 1.69 465.72 0.00 426.35 L 0.00 400.65 C 0.78 390.00 1.14 379.31 2.44 368.70 C 8.93 307.35 29.61 247.57 62.26 195.23 C 95.64 141.51 141.53 95.66 195.24 62.26 C 229.78 40.72 267.55 24.38 306.89 13.90 C 337.48 5.62 369.03 1.48 400.65 0.00 Z" />
</g>
</svg>
      </div>
      
      
     <div class="user">
     
       <div class="gradient" data-swiper-parallax-scale="0" data-swiper-parallax-y="-100%" data-swiper-parallax-duration="500"> 
         <div class="img-wrap" style="background-color:#ffffff;"> 
           <div class="img" style="background-image:url({{ block.settings.image | img_url: 'small' }});"> 
           </div> 
         </div> 
       </div>
       <div class="info">
         <div data-swiper-parallax-x="50%" data-swiper-parallax-duration="800">{{ block.settings.title }}</div>
      	 <div data-swiper-parallax-x="120%" data-swiper-parallax-duration="800">{{ block.settings.caption }}</div>
       </div>
     </div>
      
      
      
	</div>
</div>
    {% endcase %}
  {% endfor %}
  
</div>
 <div class="swiper-pagination"></div>
  </div>
  
</div>
</div>

<script>
  var callback{{ section.id }} = function(){
  // Handler when the DOM is fully loaded
  if(!window.Swiper) {
    // add script
    var script = document.createElement("script");
    script.type = "text/javascript";   
    script.src = 'https://cdn.jsdelivr.net/npm/swiper@{{ settings.swiperjsversion }}/js/swiper.min.js';
    document.getElementsByTagName("head")[0].appendChild(script);
    // add style
    var style = document.createElement("link");
    style.type = "text/css";  
    style.rel = "stylesheet";
    style.href = 'https://cdn.jsdelivr.net/npm/swiper@{{ settings.swiperjsversion }}/css/swiper.min.css';
    document.getElementsByTagName("head")[0].appendChild(style);
  }
};   
  
if (
    document.readyState === "complete" ||
    (document.readyState !== "loading" && !document.documentElement.doScroll)
) {
  callback{{ section.id }}();
} else {
  document.addEventListener("DOMContentLoaded", callback{{ section.id }});
}  
  
  
function defer{{ section.id }}(method{{ section.id }}) {
    if (window.jQuery && window.Swiper) {
        method{{ section.id }}();
    } else {
        setTimeout(function() { defer{{ section.id }}(method{{ section.id }}) }, 50);
    }
}
defer{{ section.id }}(function () {    
  

reviewslider();
  
  
//review slider hompage
function reviewslider() {
  var container = jQuery('#shopify-section-{{ section.id }} .reviewslider');
  var pagination = container.find('.swiper-pagination');

  // create the slider
            var swiper = new Swiper((container), {
                effect: 'fade',
              spaceBetween: 20,
                   speed: 800,
              parallax: true,
              loop:true,
                  autoplay: {
        delay: 7000,
        disableOnInteraction: true,
      },
      
  // If we need pagination
      pagination: {
         el: pagination,
         type: 'bullets',
         clickable: true,
      },          
    breakpoints: {
    // when window width is <= 320px
    480: {
       speed: 300,
      }
     }
             
            });
  
}  
  
});  
</script>    
{% schema %}
  {
    "name": "What People Are Saying",
    "settings": [
{
       "id": "title",
       "type": "text",
       "label": "Title",
       "default": "What people are saying"
},
{
       "id": "title_font_color",
       "type": "color",
       "label": "Font Color",
       "default": "#000000"
},
 {
     "type": "font_picker",
     "id": "title_font",
     "label": "Font",
     "default": "work_sans_n6"
   },
  {
    "type":   "range",
    "id":     "title_font_size",
    "min":       30,
    "max":       75,
    "step":     1,
    "unit":      "px",
    "label":     "Title Font Size",
    "default":   40
     },
{
 "type": "header",
 "content": "Quote Colors"
},
{
       "id": "quote_symbol_color",
       "type": "color",
       "label": "Quote Symbol Color",
       "default": "#FFFFFF"
},
{
       "id": "quote_font_color",
       "type": "color",
       "label": "Quote Font Color",
       "default": "#FFFFFF"
},
{
       "id": "quote_bubble_color",
       "type": "color",
       "label": "Quote Bubble Background Color",
       "default": "#58546F"
},
{
 "type": "header",
 "content": "Review Author Colors"
},
{
       "id": "author_name_color",
       "type": "color",
       "label": "Name Color",
       "default": "#000000"
},
{
       "id": "author_title_color",
       "type": "color",
       "label": "Professional Title Color",
       "default": "#000000"
},
{
 "type": "header",
 "content": "Additional Custom CSS"
},
{
        "id": "css",
        "type": "html",
        "label": "Custom CSS",
	"info": "Use [Font 2 Web](http://www.font2web.com/) to convert fonts"
}
],
 "blocks": [
    {
     "type": "Review",
     "name": "Review",
     "settings" : [
      {
       "id": "title",
       "type": "text",
       "label": "name"
      },
      {
       "id": "caption",
       "type": "text",
       "label": "Caption"
      },
      {
       "id": "image",
       "type": "image_picker",
       "label": "Image"
      },
      {
       "id": "review",
       "type": "textarea",
       "label": "Review"
      }
     ]
    }
   ],
  "presets": [
    {
      "name": "What People Are Saying (Slider)",
      "category": "Reviews"
    }
  ]
  }
{% endschema %}

{% stylesheet 'scss' %}
@mixin bp($point) {
  
  $bp-small: "(max-width: 350px)";
  $bp-mobile: "(max-width: 600px)";
  $bp-mobileup: "(min-width: 600px)";
  $bp-phablet: "(max-width: 1022px)";
  $bp-phabletup: "(min-width: 1022px)";
  $bp-tablet: "(max-width: 1280px)";
  $bp-tabletup: "(min-width: 1280px)";
  $bp-laptop: "(max-width: 1600px)";
  $bp-desktop: "(min-width: 1600px)";
  @if $point == desktop {
    @media #{$bp-desktop}  { @content; }
  }  
  @else if $point == laptop {
    @media #{$bp-laptop} { @content; }
  }
  @else if $point == tablet {
    @media #{$bp-tablet} { @content; }
  }
  @else if $point == tabletup {
    @media #{$bp-tabletup} { @content; }
  }
  @else if $point == phablet {
    @media #{$bp-phablet} { @content; }
  }
  @else if $point == phabletup {
    @media #{$bp-phabletup} { @content; }
  }
  @else if $point == mobile {
    @media #{$bp-mobile}  { @content; }
  }
  @else if $point == mobileup {
    @media #{$bp-mobileup} { @content; }
  }
  @else if $point == small {
    @media #{$bp-small}  { @content; }
  }

}



//color transition
@mixin transition($attribute, $duration) {
    -webkit-transition: $attribute $duration ease;
    -moz-transition: $attribute $duration ease;
    transition: $attribute $duration ease;
}


.featured-review {
  padding:25px 0 50px;
  @include bp(mobile) {
      padding: 0px 20px 50px;
  }
  & h2 {
    line-height: 1;
    margin-bottom: 35px;
    @include bp(laptop) {
      margin-bottom: 20px;
   }
    @include bp(tablet) {
      margin-bottom: 20px;
    }
    & span {
     font-size:100%;
    @include bp(mobile) {
      font-size:80%;
    }
     }

  }
  & .row {
        max-width: 43.5rem;
    & .review {
    background: #fff;
    & .quote {
     background:#58546F; 
       border-radius: 13px;
          margin-bottom: 20px;
      & .inner {
            line-height: 1.5;
           justify-content: center;
    align-items: center;
    display: flex;
      padding: 40px 40px;
        padding: 40px 40px;
    color: #ffff;
    font-size: 25px;
    font-weight: 600;
       @include bp(laptop) {
          font-size: 20px;
        }
        @include bp(tablet) {
            padding: 20px 25px;
    font-size: 21px;
        }
        @include bp(mobile) {
        font-size: 16px;
              padding: 15px 25px;
        }
        & svg {
            margin-right: 30px;
          max-width: 65px;
          height: auto;
    max-height: 100%;
          @include bp(tablet) {
              max-width: 52px;
          }
          @include bp(mobile) {
              margin-right: 24px;
    max-width: 56px;
          }
        }
        & > div > div {
            -ms-flex: 1 1 0px;
    flex: 1 1 0px;
        }
      }
    }
    }
    & .symbol {
          text-align: center;
      margin-bottom: 20px;
      & svg {
         max-width: 32px;
         height: auto;
        @include bp(laptop) {
              max-width: 20px; 
        }
        @include bp(tablet) {
        max-width: 22px;
        }
        @include bp(mobile) {
            max-width: 24px;
        }
      }
    }
    & .user {
      text-align:center;
    margin-bottom: 40px;
    display: flex;
    justify-content: center;
    align-items: center;
    & .gradient {
      display: inline-block;
    justify-content: center;   
   position: relative;     
    width: auto;
    height: auto;
    border-radius: 50%;
    padding: 3px;    
    & .img-wrap {
    width: 125px;
    height: 125px;
    border-radius: 50%;
    overflow: hidden;
    padding: 0px;
      z-index: 1;
      & .img {
        border-radius: 50%;    
      width:100%;
      height:100%;
       background-repeat: no-repeat;
    background-size: cover;     
       @include transition(filter,0.3s)
	}
    }
   }
   & .info { 
    margin-left: 30px;
    text-align: left;
      & > div:nth-child(1) {
        font-weight: bold;
        font-size: 29px;
        @include bp(laptop) {
            font-size: 23px;
        }
        @include bp(mobile) {
        font-size: 21px;
        }
      }
      & > div:nth-child(2) {
    font-size: 23px;
    font-weight: 400;
     margin-top: 7px;   
        @include bp(tablet) {
            font-size: 20px;
        }
        @include bp(mobile) {
        font-size: 19px;
        }
      }
     }
    }
    & .swiper-pagination-bullets {
          bottom: 0px;
    & .swiper-pagination-bullet {
    width: 12px;
    height: 12px;
      &.swiper-pagination-bullet-active {
      background: #777777;
      }
    }
   }
  }
}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}              
